{% comment %}
  Section: Minimal Drop
  - Full-bleed hero with optional background image
  - Minimal product grid (collection-driven)
  - Clean typography + customizable spacing
{% endcomment %}

<section
  class="mdrop"
  style="
    --mdrop-bg: {{ section.settings.bg_color }};
    --mdrop-fg: {{ section.settings.text_color }};
    --mdrop-accent: {{ section.settings.accent_color }};
    --mdrop-pad: {{ section.settings.section_padding }}px;
    --mdrop-max: {{ section.settings.max_width }}px;
  "
>
  <div class="mdrop__wrap">
    <header class="mdrop__hero">
      <div class="mdrop__heroInner">
        {% if section.settings.kicker != blank %}
          <p class="mdrop__kicker">{{ section.settings.kicker }}</p>
        {% endif %}

        {% if section.settings.heading != blank %}
          <h1 class="mdrop__heading">{{ section.settings.heading }}</h1>
        {% endif %}

        {% if section.settings.subheading != blank %}
          <p class="mdrop__sub">{{ section.settings.subheading }}</p>
        {% endif %}

        <div class="mdrop__ctaRow">
          {% if section.settings.cta_label != blank and section.settings.cta_link != blank %}
            <a class="mdrop__btn" href="{{ section.settings.cta_link }}">
              {{ section.settings.cta_label }}
            </a>
          {% endif %}

          {% if section.settings.secondary_label != blank and section.settings.secondary_link != blank %}
            <a class="mdrop__link" href="{{ section.settings.secondary_link }}">
              {{ section.settings.secondary_label }}
            </a>
          {% endif %}
        </div>
      </div>

      {% if section.settings.hero_image != blank %}
        <div class="mdrop__heroMedia" aria-hidden="true">
          {{ section.settings.hero_image | image_url: width: 2400 | image_tag: loading: 'lazy', class: 'mdrop__heroImg' }}
        </div>
      {% endif %}
    </header>

    {% assign coll = section.settings.collection %}
    {% if coll != blank %}
      <div class="mdrop__grid">
        {% for product in coll.products limit: section.settings.products_limit %}
          <a class="mdrop__card" href="{{ product.url }}">
            <div class="mdrop__img">
              {% if product.featured_image %}
                {{ product.featured_image | image_url: width: 1600 | image_tag: loading: 'lazy', class: 'mdrop__imgTag' }}
              {% else %}
                <div class="mdrop__imgPh"></div>
              {% endif %}
            </div>

            <div class="mdrop__meta">
              <div class="mdrop__title">{{ product.title }}</div>
              <div class="mdrop__price">
                {% if product.compare_at_price > product.price %}
                  <span class="mdrop__priceNow">{{ product.price | money }}</span>
                  <span class="mdrop__priceWas">{{ product.compare_at_price | money }}</span>
                {% else %}
                  <span class="mdrop__priceNow">{{ product.price | money }}</span>
                {% endif %}
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    {% endif %}

    {% if section.settings.footer_note != blank %}
      <footer class="mdrop__footer">
        <p class="mdrop__note">{{ section.settings.footer_note }}</p>
      </footer>
    {% endif %}
  </div>
</section>

<style>
  .mdrop{
    background: var(--mdrop-bg);
    color: var(--mdrop-fg);
    padding: var(--mdrop-pad) 16px;
  }
  .mdrop__wrap{
    max-width: var(--mdrop-max);
    margin: 0 auto;
  }

  /* HERO */
  .mdrop__hero{
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,.12);
    border-radius: 16px;
    min-height: 52vh;
    display: grid;
    align-items: end;
    background: rgba(255,255,255,.03);
  }
  .mdrop__heroInner{
    position: relative;
    z-index: 2;
    padding: 28px;
    max-width: 720px;
  }
  .mdrop__heroMedia{
    position: absolute;
    inset: 0;
    z-index: 1;
  }
  .mdrop__heroImg{
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    filter: saturate(1) contrast(1.02);
    transform: scale(1.02);
  }
  .mdrop__kicker{
    margin: 0 0 10px 0;
    font-size: 12px;
    letter-spacing: .22em;
    text-transform: uppercase;
    opacity: .78;
  }
  .mdrop__heading{
    margin: 0 0 12px 0;
    font-size: clamp(30px, 4.4vw, 56px);
    letter-spacing: -0.02em;
    line-height: 1.02;
  }
  .mdrop__sub{
    margin: 0 0 18px 0;
    font-size: 14px;
    line-height: 1.5;
    opacity: .86;
    max-width: 52ch;
  }
  .mdrop__ctaRow{
    display: flex;
    gap: 14px;
    align-items: center;
    flex-wrap: wrap;
  }
  .mdrop__btn{
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px 16px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.22);
    background: rgba(255,255,255,.06);
    color: var(--mdrop-fg);
    text-decoration: none;
    font-size: 13px;
    letter-spacing: .06em;
    text-transform: uppercase;
    transition: transform .12s ease, background .12s ease, border-color .12s ease;
  }
  .mdrop__btn:hover{
    transform: translateY(-1px);
    background: rgba(255,255,255,.10);
    border-color: rgba(255,255,255,.34);
  }
  .mdrop__link{
    color: var(--mdrop-fg);
    text-decoration: none;
    font-size: 13px;
    opacity: .86;
    border-bottom: 1px solid rgba(255,255,255,.26);
    padding-bottom: 2px;
  }
  .mdrop__link:hover{
    opacity: 1;
    border-bottom-color: rgba(255,255,255,.55);
  }

  /* GRID */
  .mdrop__grid{
    margin-top: 18px;
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 14px;
  }
  .mdrop__card{
    grid-column: span 4;
    text-decoration: none;
    color: inherit;
    border: 1px solid rgba(255,255,255,.12);
    border-radius: 16px;
    overflow: hidden;
    background: rgba(255,255,255,.02);
    transition: transform .14s ease, border-color .14s ease, background .14s ease;
  }
  .mdrop__card:hover{
    transform: translateY(-2px);
    border-color: rgba(255,255,255,.26);
    background: rgba(255,255,255,.04);
  }
  .mdrop__img{
    aspect-ratio: 1 / 1;
    width: 100%;
    overflow: hidden;
    background: rgba(255,255,255,.04);
  }
  .mdrop__imgTag{
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  .mdrop__imgPh{
    width: 100%;
    height: 100%;
  }
  .mdrop__meta{
    padding: 14px 14px 16px;
    display: flex;
    justify-content: space-between;
    gap: 10px;
    align-items: baseline;
  }
  .mdrop__title{
    font-size: 13px;
    letter-spacing: .02em;
    line-height: 1.3;
    text-transform: uppercase;
  }
  .mdrop__price{
    white-space: nowrap;
    font-size: 13px;
    opacity: .92;
  }
  .mdrop__priceWas{
    margin-left: 8px;
    opacity: .55;
    text-decoration: line-through;
  }
  .mdrop__footer{
    margin-top: 16px;
    opacity: .78;
    font-size: 12px;
    letter-spacing: .02em;
  }

  /* Responsive */
  @media (max-width: 980px){
    .mdrop__card{ grid-column: span 6; }
    .mdrop__heroInner{ padding: 22px; }
  }
  @media (max-width: 640px){
    .mdrop__hero{ min-height: 46vh; border-radius: 14px; }
    .mdrop__card{ grid-column: span 12; border-radius: 14px; }
    .mdrop__meta{ padding: 12px 12px 14px; }
  }
</style>

{% schema %}
{
  "name": "Minimal Drop",
  "settings": [
    { "type": "text", "id": "kicker", "label": "Kicker", "default": "Limited Release" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "DROP 01" },
    { "type": "textarea", "id": "subheading", "label": "Subheading", "default": "Minimal storefront layout for a clean drop-style release." },

    { "type": "text", "id": "cta_label", "label": "Primary button label", "default": "Shop now" },
    { "type": "url", "id": "cta_link", "label": "Primary button link" },

    { "type": "text", "id": "secondary_label", "label": "Secondary link label", "default": "View all products" },
    { "type": "url", "id": "secondary_link", "label": "Secondary link" },

    { "type": "image_picker", "id": "hero_image", "label": "Hero image (optional)" },

    { "type": "collection", "id": "collection", "label": "Collection to feature" },
    { "type": "range", "id": "products_limit", "label": "Products to show", "min": 4, "max": 24, "step": 1, "default": 12 },

    { "type": "textarea", "id": "footer_note", "label": "Footer note (optional)", "default": "Shipping + returns info or drop disclaimer goes here." },

    { "type": "color", "id": "bg_color", "label": "Background color", "default": "#0b0b0b" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#ffffff" },
    { "type": "color", "id": "accent_color", "label": "Accent color", "default": "#ffffff" },

    { "type": "range", "id": "section_padding", "label": "Section padding", "min": 16, "max": 80, "step": 4, "default": 40 },
    { "type": "range", "id": "max_width", "label": "Max width", "min": 960, "max": 1600, "step": 40, "default": 1280 }
  ],
  "presets": [
    { "name": "Minimal Drop" }
  ]
}
{% endschema %}
